<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BigSmash - Produit</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,400;0,600;0,700;1,600&display=swap" rel="stylesheet">
   :root {
  --bigsmash-red: #E42B16;
  --bigsmash-dark: #191919;
  --bigsmash-gray: #808080;
  --bigsmash-light-gray: #f4f4f4;
  --bigsmash-white: #FFFFFF;
  --bigsmash-shadow: 0 4px 16px rgba(0,0,0,0.07);
  --bigsmash-shadow-hover: 0 8px 32px rgba(0,0,0,0.13);
  --bigsmash-radius: 32px;
  --bigsmash-radius-small: 24px;
}

/* Font */
body, .font-montserrat {
  font-family: Montserrat, Arial, sans-serif;
}

body {
  background: var(--bigsmash-light-gray);
  margin: 0;
  padding: 0;
}

/* Header/banner */
.main-header {
  width: 100vw;
  background: var(--bigsmash-white);
  box-shadow: var(--bigsmash-shadow);
  border-bottom-left-radius: var(--bigsmash-radius);
  border-bottom-right-radius: var(--bigsmash-radius);
  position: relative;
  z-index: 10;
}
.banner-img {
  display: block;
  width: 100%;
  height: 219px;
  object-fit: cover;
  border-bottom-left-radius: var(--bigsmash-radius-small);
  border-bottom-right-radius: var(--bigsmash-radius-small);
}

/* Fiche produit principale */
.bigsmash-product-card {
  background: var(--bigsmash-white);
  border-radius: var(--bigsmash-radius);
  box-shadow: var(--bigsmash-shadow-hover);
  padding: 32px;
  max-width: 900px;
  margin: 40px auto 0;
  width: 100%;
  position: relative;
  overflow: visible;
}

.bigsmash-product-image-container {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 24px;
}
.bigsmash-product-image {
  width: 100%;
  max-width: 640px;
  height: 320px;
  object-fit: cover;
  border-radius: var(--bigsmash-radius-small);
  box-shadow: var(--bigsmash-shadow);
}

.bigsmash-product-category {
  display: inline-block;
  background: #EA3D2F;
  color: #fff;
  border-radius: 20px;
  padding: 4px 18px;
  font-size: 16px;
  font-weight: 600;
  margin-bottom: 10px;
}
.bigsmash-product-title {
  font-size: 2.1em;
  font-weight: 700;
  color: var(--bigsmash-dark);
  margin: 18px 0 8px 0;
}
.bigsmash-product-description {
  font-size: 1.1em;
  color: var(--bigsmash-gray);
  margin-bottom: 16px;
}
.bigsmash-product-price {
  font-size: 1.3em;
  font-weight: bold;
  color: var(--bigsmash-red);
  margin-bottom: 22px;
}

/* Bouton retour */
.bigsmash-back-btn,
.bigsmash-back-button {
  background: #EA3D2F;
  color: #fff;
  border: none;
  border-radius: 0 0 32px 32px;
  width: 42px;
  height: 42px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: -30px;
  left: -30px;
  font-size: 1.8em;
  z-index: 20;
  transition: background .2s, transform .2s;
}
.bigsmash-back-btn:hover,
.bigsmash-back-button:hover {
  background: #d32b1f;
  transform: scale(1.08);
}

/* Quantité */
.bigsmash-quantity-container {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  margin-bottom: 24px;
}
.bigsmash-qty-btn {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  border: 2px solid var(--bigsmash-red);
  background: var(--bigsmash-white);
  color: var(--bigsmash-red);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-weight: bold;
  font-size: 20px;
  transition: background .2s, color .2s, transform .15s;
}
.bigsmash-qty-btn:hover {
  background: var(--bigsmash-red);
  color: var(--bigsmash-white);
  transform: scale(1.08);
}
.bigsmash-qty-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}
.bigsmash-quantity-display {
  font-size: 24px;
  font-weight: 700;
  color: var(--bigsmash-dark);
  min-width: 40px;
  text-align: center;
}

/* Options */
.bigsmash-options-section {
  margin-bottom: 24px;
}
.bigsmash-options-title {
  font-size: 18px;
  font-weight: 700;
  color: var(--bigsmash-dark);
  margin-bottom: 14px;
  text-align: center;
}
.bigsmash-options-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 12px;
  margin: 0 auto;
}
.bigsmash-options-grid--count-4 { margin: 0 86px; }
.bigsmash-options-grid--count-3 { margin: 0 166px; }
.bigsmash-options-grid--count-2 { margin: 0 246px; }
.bigsmash-options-grid--count-1 { margin: 0 336px; }

/* Cartes options */
.bigsmash-option-card {
  width: 150px;
  height: 150px;
  background: var(--bigsmash-white);
  border-radius: var(--bigsmash-radius-small);
  box-shadow: var(--bigsmash-shadow);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  text-align: center;
  padding: 12px;
  transition: box-shadow .2s, transform .2s, background .2s;
  cursor: pointer;
}
.bigsmash-option-card:hover {
  box-shadow: var(--bigsmash-shadow-hover);
  transform: translateY(-2px);
  background: #fbeceb;
}
.bigsmash-option-card.selected {
  background: rgba(234, 61, 47, 0.07);
}

.bigsmash-option-image {
  width: 100px;
  height: 62px;
  border-radius: 16px;
  object-fit: cover;
  margin-bottom: 6px;
}
.bigsmash-option-name {
  font-weight: 400;
  font-size: 13px;
  color: var(--bigsmash-dark);
  margin: 8px 0 4px 0;
}
.bigsmash-option-price {
  font-style: italic;
  font-weight: 600;
  font-size: 12px;
  color: var(--bigsmash-red);
  margin-bottom: 6px;
}

/* Option quantité controls */
.bigsmash-option-controls {
  display: flex;
  align-items: center;
  gap: 8px;
}
.bigsmash-option-qty-btn {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  border: none;
  background: var(--bigsmash-red);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-weight: bold;
  font-size: 16px;
  transition: background .2s, transform .13s;
}
.bigsmash-option-qty-btn:hover {
  background: #ff7864;
  transform: scale(1.09);
}
.bigsmash-option-qty-display {
  font-size: 15px;
  font-weight: 700;
  color: var(--bigsmash-dark);
  min-width: 18px;
  text-align: center;
}

/* Indicateurs radio/checkbox */
.bigsmash-radio-indicator,
.bigsmash-checkbox-indicator {
  width: 24px; height: 24px;
  border: 2px solid #e5e7eb;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto;
  transition: border-color .2s;
}
.bigsmash-checkbox-indicator { border-radius: 4px; }
.bigsmash-radio-dot,
.bigsmash-checkbox-check {
  width: 12px; height: 12px;
  background: var(--bigsmash-red);
  border-radius: 50%;
  opacity: 0;
  transition: opacity .2s;
}
.bigsmash-checkbox-check { border-radius: 2px; }
.bigsmash-option-card.selected .bigsmash-radio-indicator,
.bigsmash-option-card.selected .bigsmash-checkbox-indicator {
  border-color: var(--bigsmash-red);
}
.bigsmash-option-card.selected .bigsmash-radio-dot,
.bigsmash-option-card.selected .bigsmash-checkbox-check {
  opacity: 1;
}

/* ===== Sticky zone (bas écran) ===== */
.bigsmash-cart-container {
  position: fixed;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 520px;
  max-width: calc(100vw - 32px);
  height: 110px;
  background: rgba(255,255,255,0.95);
  border-radius: var(--bigsmash-radius);
  box-shadow: 0 -2px 16px rgba(0,0,0,0.08);
  z-index: 2000;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 0 12px;
}

.bigsmash-cart-container .bigsmash-sticky-qty-controls {
  display: flex;
  align-items: center;
  gap: 18px;
  margin-bottom: 6px;
}
.bigsmash-cart-container .bigsmash-sticky-qty-btn {
  width: 36px; height: 36px;
  border-radius: 50%;
  background: var(--bigsmash-red);
  color: #fff;
  font-size: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  cursor: pointer;
  font-weight: bold;
  transition: transform .13s;
}
.bigsmash-cart-container .bigsmash-sticky-qty-btn:hover {
  background: #ff7864;
  transform: scale(1.09);
}
.bigsmash-cart-container .bigsmash-sticky-qty-display {
  color: #191919;
  font-size: 20px;
  font-weight: 700;
  min-width: 28px;
  text-align: center;
}

/* Sticky add-to-cart main btn */
.bigsmash-cart-container .bigsmash-main-add-btn {
  width: 260px;
  height: 40px;
  background: var(--bigsmash-red);
  border: 2px solid var(--bigsmash-white);
  border-radius: 20px;
  color: #fff;
  font-weight: 600;
  font-size: 17px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background .3s, color .3s, transform .2s;
  margin-top: 6px;
}
.bigsmash-cart-container .bigsmash-main-add-btn:hover {
  background: var(--bigsmash-white);
  color: var(--bigsmash-red);
  transform: scale(1.04);
}

/* Flottant desktop icons */
.bigsmash-desktop-buttons {
  position: fixed;
  bottom: 20px;
  left: 20px;
  display: flex;
  gap: 12px;
  z-index: 1003;
}
.bigsmash-desktop-btn {
  width: 48px; height: 48px;
  border-radius: 50%;
  border: none;
  background: var(--bigsmash-red);
  color: var(--bigsmash-white);
  box-shadow: var(--bigsmash-shadow-hover);
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: all .3s;
}
.bigsmash-desktop-btn:hover {
  background: var(--bigsmash-white);
  color: var(--bigsmash-red);
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(0,0,0,.2);
}
.bigsmash-desktop-btn svg {
  width: 24px;
  height: 24px;
}

/* Erreur / modals */
.bigsmash-error-container {
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  background: var(--bigsmash-light-gray);
  display: flex; align-items: center; justify-content: center;
  z-index: 1000;
}
.bigsmash-error-content {
  background: var(--bigsmash-white);
  border-radius: var(--bigsmash-radius);
  padding: 40px;
  text-align: center;
  box-shadow: var(--bigsmash-shadow-hover);
  max-width: 400px;
  margin: 20px;
}
.bigsmash-error-emoji { font-size: 64px; margin-bottom: 20px; }
.bigsmash-error-title {
  font-size: 24px; font-weight: 700; color: var(--bigsmash-dark); margin-bottom: 16px;
}
.bigsmash-error-message {
  font-size: 16px; color: var(--bigsmash-gray); margin-bottom: 24px; line-height: 1.5;
}
.bigsmash-error-btn {
  background: var(--bigsmash-red); color: var(--bigsmash-white);
  border: none; border-radius: var(--bigsmash-radius-small);
  padding: 12px 24px; font-size: 16px; font-weight: 600; cursor: pointer;
  transition: background .3s, transform .2s;
  text-decoration: none; display: inline-block;
}
.bigsmash-error-btn:hover {
  background: #d63384; transform: translateY(-2px); box-shadow: var(--bigsmash-shadow);
}

/* Cacher les anciens containers si besoin */
.bigsmash-add-to-cart-btn,
.bigsmash-quantity-container,
#cart-bar {
  display: none !important;
}

/* Responsive */
@media (max-width: 1100px) {
  .bigsmash-product-card {
    max-width: 98vw;
    padding: 18px;
  }
  .bigsmash-cart-container {
    width: 97vw;
    left: 1.5vw;
    transform: none;
    padding: 0 5px;
  }
}
@media (max-width: 700px) {
  .main-header { border-radius: 0; }
  .banner-img { border-radius: 0; }
  .bigsmash-product-card {
    max-width: 100vw;
    margin: 16px 0 0 0;
    border-radius: 0;
    padding: 8px 0 80px 0;
  }
  .bigsmash-cart-container {
    width: 99vw;
    left: 0;
    padding: 0 2vw;
    height: 85px;
    border-radius: 32px 32px 0 0;
  }
  .bigsmash-main-add-btn { width: 98vw; }
}

            // Rendu de la page
            render() {
                document.title = `BigSmash - ${this.product.name}`;
                
                document.getElementById('app').innerHTML = `
               <main class="flex justify-center items-start min-h-[70vh] w-full pt-12 pb-20 bg-[#f5f6f7] px-[322px]">
  <div class="relative w-full max-w-[900px] mx-auto bg-white rounded-[32px] shadow-lg p-8 overflow-visible">
    <!-- Bouton retour (toujours en absolute par rapport au parent relative) -->
    <a href="produits.html"
       class="absolute -top-10 -right-7 bg-[#EA3D2F] text-white rounded-bl-[32px] rounded-tr-[32px]
              w-10 h-10 flex items-center justify-center text-2xl hover:bg-[#d32b1f] z-20">
      ←
    </a>


                        </div>

                        <!-- Carte produit principale -->
                        <div class="bigsmash-product-card">
                            <!-- Image du produit -->
                            <div class="bigsmash-product-image-container">
                                <img src="${this.product.image}" alt="${this.product.name}" class="bigsmash-product-image">
                            </div>

                                <!-- Catégorie -->
                                <span class="bigsmash-product-category">${this.product.category}</span>
                                
                                <!-- Titre -->
                                <h1 class="bigsmash-product-title">${this.product.name}</h1>
                                
                                <!-- Description -->
                                <p class="bigsmash-product-description">${this.product.description}</p>
                                
                                <!-- Prix -->
                                <div class="bigsmash-product-price">
                                    ${this.product.price.toFixed(2).replace('.', ',')} €
                                </div>

                                <!-- Quantité -->
                                <div class="bigsmash-quantity-container">
                                    <button class="bigsmash-qty-btn" id="qty-minus">−</button>
                                    <span class="bigsmash-quantity-display" id="quantity">${this.quantity}</span>
                                    <button class="bigsmash-qty-btn" id="qty-plus">+</button>
                                </div>

                                ${this.renderOptions()}
                        </div>

                        <!-- Zone sticky en bas (fond blanc translucide) -->
<div class="bigsmash-cart-container">
  <!-- Compteur centré au‑dessus du bouton -->
  <div class="bigsmash-sticky-qty-controls">
    <button class="bigsmash-sticky-qty-btn" id="sticky-qty-minus">−</button>
    <span class="bigsmash-sticky-qty-display" id="sticky-quantity">${this.quantity}</span>
    <button class="bigsmash-sticky-qty-btn" id="sticky-qty-plus">+</button>
  </div>
  <!-- Bouton rouge centré -->
  <button class="bigsmash-main-add-btn" id="add-to-cart">
    <span id="cart-btn-text">
      Ajouter au panier — ${this.calculateTotal().toFixed(2).replace('.', ',')} €
    </span>
  </button>
</div>


                    <!-- Icônes flottantes (toujours visibles) -->
                    <div class="bigsmash-desktop-buttons">
                        <button class="bigsmash-desktop-btn" title="Accueil" onclick="window.location.href='index.html'">
                            <svg fill="currentColor" viewBox="0 0 24 24">
                                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                            </svg>
                        </button>
                        <button class="bigsmash-desktop-btn" title="Mon compte">
                            <svg fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                            </svg>
                        </button>
                    </div>
                `;
            }

            // Rendu des options
           
renderOptions() {
  let html = '';

  // 1️⃣ Suppléments
  if (this.product.options?.supplements?.length > 0) {
    html += `
      <div class="bigsmash-options-section">
        <h3 class="bigsmash-options-title">Souhaitez-vous un supplément ?</h3>
        <div class="bigsmash-options-grid bigsmash-options-grid--count-${this.product.options.supplements.length}">
          ${this.product.options.supplements.map((supplement, index) => `
            <div class="bigsmash-option-card">
              <img src="${supplement.image}" alt="${supplement.name}" class="bigsmash-option-image">
              <div class="bigsmash-option-name">${supplement.name}</div>
              <div class="bigsmash-option-price">+${supplement.price.toFixed(2).replace('.', ',')} €</div>
              <div class="bigsmash-option-controls">
                <button class="bigsmash-option-qty-btn supplement-minus" data-index="${index}">−</button>
                <span class="bigsmash-option-qty-display supplement-qty" data-index="${index}">0</span>
                <button class="bigsmash-option-qty-btn supplement-plus" data-index="${index}">+</button>
              </div>
            </div>
          `).join('')}
        </div>
      </div>
    `;
  }

  // 2️⃣ Personnalisation (remove)
  if (this.product.options?.remove?.length > 0) {
    html += `
      <div class="bigsmash-options-section">
        <h3 class="bigsmash-options-title">On enlève quelque chose ?</h3>
        <div class="bigsmash-options-grid bigsmash-options-grid--count-${this.product.options.remove.length}">
          ${this.product.options.remove.map((item, index) => `
            <label class="bigsmash-option-card">
              <input type="checkbox" class="sr-only remove-checkbox" data-index="${index}">
              <div class="bigsmash-checkbox-indicator">
                <div class="bigsmash-checkbox-check"></div>
              </div>
              <div class="bigsmash-option-name">${item.name}</div>
            </label>
          `).join('')}
        </div>
      </div>
    `;
  }

  // 3️⃣ Boissons
  if (this.product.options?.drinks?.length > 0) {
    html += `
      <div class="bigsmash-options-section">
        <h3 class="bigsmash-options-title">Choisis ta boisson</h3>
        <div class="bigsmash-options-grid bigsmash-options-grid--count-${this.product.options.drinks.length}">
          ${this.product.options.drinks.map((drink, index) => `
            <label class="bigsmash-option-card">
              <input type="radio" name="drink" value="${index}" class="sr-only drink-radio">
              <img src="${drink.image}" alt="${drink.name}" class="bigsmash-option-image">
              <div class="bigsmash-option-name">${drink.name}</div>
              <div class="bigsmash-option-price">
                ${drink.price > 0
                  ? `+${drink.price.toFixed(2).replace('.', ',')} €`
                  : 'Inclus'}
              </div>
              <div class="bigsmash-radio-indicator">
                <div class="bigsmash-radio-dot"></div>
              </div>
            </label>
          `).join('')}
        </div>
      </div>
    `;
  }
}



            // Liaison des événements
            bindEvents() {
                // Quantité
                document.getElementById('qty-minus')?.addEventListener('click', () => {
                    if (this.quantity > 1) {
                        this.quantity--;
                        this.updateDisplay();
                    }
                });
              
                document.getElementById('qty-plus')?.addEventListener('click', () => {
                    this.quantity++;
                    this.updateDisplay();
                });

                // Quantité sticky
                document.getElementById('sticky-qty-minus')?.addEventListener('click', () => {
                    if (this.quantity > 1) {
                        this.quantity--;
                        this.updateDisplay();
                    }
                });

                document.getElementById('sticky-qty-plus')?.addEventListener('click', () => {
                    this.quantity++;
                    this.updateDisplay();
                });

                // Suppléments
                document.querySelectorAll('.supplement-minus').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const index = parseInt(btn.dataset.index);
                        const current = this.selectedOptions.supplements[index] || 0;
                        if (current > 0) {
                            this.selectedOptions.supplements[index] = current - 1;
                            this.updateDisplay();
                        }
                    });
                });

                document.querySelectorAll('.supplement-plus').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const index = parseInt(btn.dataset.index);
                        const current = this.selectedOptions.supplements[index] || 0;
                        this.selectedOptions.supplements[index] = current + 1;
                        this.updateDisplay();
                    });
                });

                // Boissons
                document.querySelectorAll('.drink-radio').forEach(radio => {
                    radio.addEventListener('change', () => {
                        if (radio.checked) {
                            const index = parseInt(radio.value);
                            this.selectedOptions.drink = this.product.options.drinks[index];
                            this.updateDisplay();
                        }
                    });
                });

                // Options à retirer
                document.querySelectorAll('.remove-checkbox').forEach(checkbox => {
                    checkbox.addEventListener('change', () => {
                        const index = parseInt(checkbox.dataset.index);
                        this.selectedOptions.remove[index] = checkbox.checked;
                        this.updateDisplay();
                    });
                });

                // Bouton d'ajout au panier
                document.getElementById('add-to-cart')?.addEventListener('click', () => {
                    this.addToCart();
                });
            }

            // Mettre à jour l'affichage
            updateDisplay() {
                // Quantité
                const qtyElement = document.getElementById('quantity');
                const stickyQtyElement = document.getElementById('sticky-quantity');
                if (qtyElement) qtyElement.textContent = this.quantity;
                if (stickyQtyElement) stickyQtyElement.textContent = this.quantity;

                // Suppléments
                Object.keys(this.selectedOptions.supplements).forEach(index => {
                    const qtyElement = document.querySelector(`.supplement-qty[data-index="${index}"]`);
                    if (qtyElement) {
                        qtyElement.textContent = this.selectedOptions.supplements[index] || 0;
                    }
                });

                // Indicateurs de boisson
                document.querySelectorAll('.drink-radio').forEach((radio, index) => {
                    const card = radio.closest('.bigsmash-option-card');
                    
                    if (radio.checked) {
                        card.classList.add('selected');
                    } else {
                        card.classList.remove('selected');
                    }
                });

                // Indicateurs de personnalisation
                document.querySelectorAll('.remove-checkbox').forEach((checkbox, index) => {
                    const card = checkbox.closest('.bigsmash-option-card');
                    
                    if (checkbox.checked) {
                        card.classList.add('selected');
                    } else {
                        card.classList.remove('selected');
                    }
                });

                // Prix total
                const total = this.calculateTotal();
                const btnText = document.getElementById('cart-btn-text');
                if (btnText) {
                    btnText.textContent = `Ajouter au panier — ${total.toFixed(2).replace('.', ',')} €`;
                }
            }

            // Calculer le prix total
            calculateTotal() {
                let total = this.product.price * this.quantity;

                // Ajouter les suppléments
                Object.keys(this.selectedOptions.supplements).forEach(index => {
                    const qty = this.selectedOptions.supplements[index] || 0;
                    if (qty > 0) {
                        const supplement = this.product.options.supplements[index];
                        total += supplement.price * qty * this.quantity;
                    }
                });

                // Ajouter la boisson
                if (this.selectedOptions.drink && this.selectedOptions.drink.price > 0) {
                    total += this.selectedOptions.drink.price * this.quantity;
                }

                return total;
            }

            // Ajouter au panier
            addToCart() {
                // Préparer les options pour le panier
                const options = {
                    supplements: {},
                    drink: this.selectedOptions.drink,
                    remove: this.selectedOptions.remove
                };

                // Formater les suppléments
                Object.keys(this.selectedOptions.supplements).forEach(index => {
                    const qty = this.selectedOptions.supplements[index];
                    if (qty > 0) {
                        const supplement = this.product.options.supplements[index];
                        options.supplements[index] = {
                            name: supplement.name,
                            price: supplement.price,
                            quantity: qty
                        };
                    }
                });

                // Ajouter au panier via le système global
                if (window.cartSystem) {
                    window.cartSystem.addToCart(this.product, this.quantity, options);
                    window.location.href = "produits.html";

                } else {
                    console.error('Système de panier non disponible');
                    alert('Erreur: Système de panier non disponible');
                }
            }
        }

        // Initialiser la page produit
        document.addEventListener('DOMContentLoaded', () => {
            new ProductPage();
        });
    </script>
</body>
</html>