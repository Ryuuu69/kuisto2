<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuisto - Produits Montpellier</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Import toutes les coupes nécessaires : 400 normal, 600 normal, 700 normal, 600 italic -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,400;0,600;0,700;1,600&display=swap" rel="stylesheet">
      <style>
        .font-montserrat { font-family: 'Montserrat', sans-serif; }
        .bg-kuistoOrange { background-color: #F18701; }
        
        /* ———————————————————————————
           VARIABLES GÉNÉRALES
        ——————————————————————————— */
        :root {
            --hero-h: 219px;        /* hauteur du bandeau rouge */
            --side-w: 211px;        /* largeur du menu vertical */
            --gutter: 24px;         /* espacement latéral des produits */
            --card-min: 340px;/* largeur minimale d'une carte produit */
            --catalogue-offset: 10px; /* décale la zone principale vers la droite */
            
            /* Variables pour le composant carte produit */
            --card-w: 370px;        /* largeur de la carte */
            --card-h: 150px;        /* hauteur de la carte */
            --thumb: 120px;         /* taille de l'image */
            --btn: 48px;            /* taille du bouton + */
            --gap: 22px;            /* espace entre cartes */
            
            --red: #E30613;
            --kuisto-orange: #F18701;
            --grey-text: #808080;
            --grey-line: #d0d0d0;
            --card-radius: 28px;
            --bigsmash-white: #ffffff;
            --bigsmash-shadow: 0 4px 16px rgba(0,0,0,0.08);
            --bigsmash-radius: 20px;
        }

        /* Reset de base */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
         html, body, .side-nav, .catalogue, main, .app, .container {
    background: #f5f6f7 !important;
           height: 100%;
}

        
       

        /* Bannière style "produit.html" avec arrondis en bas */
.hero {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
            align-items: center;
            gap: 14px;
            text-transform: uppercase;
        }
        
        .section-title::after {
            content: "";
            flex: 1;
            height: 1px;
            background: var(--grey-line);
        }

        /* ————————————— LAYOUT PRODUITS ————————————— */
        /* Grille de cartes produits */
        
.cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(var(--card-w), var(--card-w)));
  gap: var(--gap);
  justify-content: start; /* ou center si tu veux centrer quand il y a peu de colonnes */
  /* Optionnel : limite largeurs pour ne pas laisser trop d'espace vide */
  /* max-width: calc(3 * var(--card-w) + 2 * var(--gap)); */
  /* margin: 0 auto; */
}

 .product-card {
  position: relative;
  width: var(--card-w);
  height: var(--card-h);
  background: #fff;
  border-radius: var(--card-radius);
  box-shadow: 0 4px 12px rgba(0,0,0,.08);
  overflow: hidden;
}
.product-card:hover {
  box-shadow: 0 8px 24px rgba(0,0,0,.15);
}
.product-card.glow {
  box-shadow: 0 0 0 4px #F18701, 0 0 18px rgba(241,135,1,0.6);
}

.product-card .thumb {
  position: absolute;
  top: 15px;
  left: 15px;
  width: var(--thumb);
  height: var(--thumb);
  border-radius: 18px;
  overflow: hidden;
}
.product-card .thumb img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 18px;
}

.product-card .info {
  position: absolute;
  top: 0;
  bottom: 0;
  left: calc(15px + var(--thumb) + 15px);
  right: 13px;
  display: flex;
  flex-direction: column;
  padding: 17px 0 40px 0;
}

.product-card .product-name,
.product-card h3 {
  font-family: 'Montserrat', sans-serif;
  font-weight: 700;
  font-size: 17px;
  line-height: 1.1;
  color: #000;
  text-transform: uppercase;
  margin: 0 0 5px 0;
}

.product-card .desc {
  font-family: 'Montserrat', sans-serif;
  font-style: italic;
  font-weight: 600;
  font-size: 10px;
  line-height: 13px;
  color: #808080;
  margin: 0 0 8px 0;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}

.product-card .price {
  margin-top: auto;
  font-size: 0;
}
.product-card .price .from {
  font-style: italic;
  font-weight: 600;
  font-size: 10px;
  line-height: 15px;
  color: #000;
  margin-right: 3px;
}
.product-card .price .value {
  font-weight: 700;
  font-size: 16px;
  line-height: 24px;
  color: #000;
}

.add-btn-corner {
  position: absolute;
  right: 13px;
  bottom: 13px;
  width: 50px;
  height: 36px;
  background: #000;
  color: #fff;
  font-size: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-top-left-radius: 20px;
  border-bottom-right-radius: 20px;
  text-decoration: none;
  transition: background 0.3s;
}
.add-btn-corner:hover {
  background: #F18701;
}

.cart-quantity-bar {
  position: absolute;
  right: 13px;
  bottom: 13px;
  width: 152px;
  height: 36px;
  background: #000;
  border-top-left-radius: 20px;
  border-bottom-right-radius: 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 8px;
}
.cart-quantity-bar button,
.cart-quantity-bar a {
  width: 36px;
  height: 36px;
  background: transparent;
  border: none;
  color: #fff;
  font-size: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  cursor: pointer;
  transition: background 0.12s;
  text-decoration: none;
}
.cart-quantity-bar button:hover,
.cart-quantity-bar a:hover {
  background: #F18701;
  color: #fff;
}

.cart-qty {
  font-size: 18px;
  font-weight: 700;
  color: #fff;
}

@media (max-width: 540px) {
  .product-card {
    width: 95vw;
  }
}

        .mobile-popup-buttons .desktop-btn {
  background: #F18701 !important;
  color: #fff !important;
}
.mobile-popup-buttons .desktop-btn:hover {
  background: #fff !important;
  color: #F18701 !important;
}

        .price .value {
            font-weight: 700;
            font-size: 16px;
            line-height: 24px;
            color: #000;
        }

     
        /* Boutons en bas à gauche - Desktop uniquement */
        .desktop-buttons {
            position: fixed;
            bottom: 20px;
            left: calc(var(--side-w) / 2 - 60px); /* centré avec le menu */
@@ -521,55 +484,50 @@
}


        .product-plus-btn {
            background: #191919;
            color: #fff;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            transition: background 0.2s;
        }

        .product-plus-btn:hover {
            background: #F18701;
        }
        body.mobile-menu-active #cart-fab {
  display: none !important;
}


        /* Masquer sur mobile */
        @media (max-width: 768px) {
            .desktop-buttons {
                display: none;
            }
        }

        /* Mise à jour des anciens styles pour compatibilité */
        .products {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(var(--card-w), 1fr));
            gap: var(--gap);
        }

        /* Styles pour les anciens éléments (si présents) */
        .title {
            font-family: "Montserrat", sans-serif;
            font-weight: 400;
            font-size: 11px;
            line-height: 13px;
            color: #000;
            text-transform: uppercase;
            margin: 0 0 4px;
        }

        .desc {
            font-family: "Montserrat", sans-serif;
            font-style: italic;
            font-weight: 600;
            font-size: 10px;
        </div>
    </div>


    <!-- Include shared product data -->
    <script src="products-data.js"></script>
<script>
    function createProductCard(product) {
  const slug = product.slug;
  const cartQuantity = window.cartSystem ? window.cartSystem.getProductQuantity(slug) : 0;

  // Bloc prix
  let priceHtml = '';
  if (product.options?.sizes?.length > 0) {
    const prices = product.options.sizes.map(s => s.price);
    const min = Math.min(...prices);
    priceHtml = `<span class="from">À partir de </span><span class="value">${min.toFixed(2).replace('.', ',')} €</span>`;
  } else {
    priceHtml = `<span class="value">${product.price.toFixed(2).replace('.', ',')} €</span>`;
  }

  let actionButton;

  if (cartQuantity > 0) {
    actionButton = `
      <div class="cart-quantity-bar">
        ${cartQuantity > 1 ? `<button onclick=\"window.cartSystem.decreaseQuantity('${slug}')\">–</button>` : ''}
        <span class="cart-qty">${cartQuantity}</span>
        <a href="produit.html?slug=${slug}" class="cart-plus">+</a>
      </div>
    `;
  } else {
    actionButton = `<a href="produit.html?slug=${slug}" class="add-btn-corner">+</a>`;
  }

  const glow = cartQuantity > 0 ? 'glow' : '';

  return `
    <div class="product-card ${glow}">
      <div class="thumb">
        <img src="${product.image}" alt="${product.name}">
      </div>
      <div class="info">
        <h3 class="product-name">${product.name}</h3>
        <p class="desc">${product.description}</p>
        <div class="price">${priceHtml}</div>
      </div>
      ${actionButton}
    </div>
  `;
}


        // Fonction pour convertir une catégorie en ID de section
        function getCategorySectionId(category) {
            return category.toLowerCase()
                .replace(/\s+/g, '-')
                .replace(/é/g, 'e')
                .replace(/è/g, 'e')
                .replace(/à/g, 'a')
                .replace(/ç/g, 'c');
        }

        // Fonction pour rediriger vers la page produit
        function goToProduct(slug) {
            window.location.href = `produit.html?slug=${slug}`;
        }

        // Fonction pour ajouter un produit au panier (utilisée par les boutons +)
        function addProductToCart(slug) {
            const product = products.find(p => p.slug === slug);
      // Desktop
      document.querySelectorAll('.classic-menu-item').forEach(li => li.classList.remove('active'));
      document.querySelector(.classic-menu-item[data-cat="${cat}"])?.classList.add('active');
      // Mobile
      document.querySelectorAll('.mobile-menu-item').forEach(li => li.classList.remove('active'));
      document.querySelector(.mobile-menu-item[data-cat="${cat}"])?.classList.add('active');
      // Scroll (sur mobile, en ferme le menu après click)
      const section = document.getElementById(cat);
      if(section) section.scrollIntoView({behavior: "smooth"});
      if(isMobile) toggleMobileMenu(false);
    };
    

  </script>

<script>
  // Synchronisation de la hauteur du hero pour que le catalogue soit toujours bien poussé
  function syncHeroHeight() {
    const hero = document.querySelector('.hero');
    if (!hero) return;
    const h = hero.offsetHeight;
    document.documentElement.style.setProperty('--hero-h', ${h}px);
  }
  window.addEventListener('load', syncHeroHeight);
  window.addEventListener('resize', syncHeroHeight);
          </script>

